{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\erosa\\\\Desktop\\\\Projects\\\\React\\\\brewery-search\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\erosa\\\\Desktop\\\\Projects\\\\React\\\\brewery-search\\\\client\\\\src\\\\components\\\\breweries\\\\Search.js\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport Alert from \"../layout/Alert\";\nimport BreweryContext from \"../../context/brewery/breweryContext\";\nimport AlertContext from \"../../context/alert/alertContext\";\nimport BreweryURLBuilder from \"../../utils/BreweryURLBuilder\";\n\nconst Search = () => {\n  const breweryContext = useContext(BreweryContext);\n  const alertContext = useContext(AlertContext);\n\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        text = _useState2[0],\n        setText = _useState2[1];\n\n  const searchBreweries = breweryContext.searchBreweries,\n        getUserLocation = breweryContext.getUserLocation,\n        clearBreweries = breweryContext.clearBreweries,\n        breweries = breweryContext.breweries,\n        loading = breweryContext.loading;\n  useEffect(() => {\n    if (\"geolocation\" in navigator) {\n      navigator.geolocation.getCurrentPosition(pos => {\n        let lat = pos.coords.latitude;\n        let long = pos.coords.longitude;\n        getUserLocation(lat, long);\n      }, error => {\n        console.error(error);\n      });\n    } else {\n      console.error(\"Blocked by client\");\n    }\n  }, []);\n\n  const onChange = e => setText(e.target.value);\n\n  const onSubmit = e => {\n    e.preventDefault();\n\n    if (text === \"\") {\n      alertContext.setAlert(\"Please enter something\", \"warning\");\n    } else {\n      const url = new BreweryURLBuilder().setText(text);\n      searchBreweries(url.getUrl()).then(() => {\n        if (!loading && breweries.length === 0) {\n          alertContext.setAlert(\"Sorry, we could not find breweries for what you're looking for. Please try another search term.\", \"warning\");\n        }\n      });\n      setText(\"\");\n    }\n  };\n\n  const clearAll = () => {\n    clearBreweries();\n  };\n\n  return React.createElement(\"div\", {\n    className: \"container mt-1 mb-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(Alert, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), React.createElement(\"form\", {\n    className: \"form\",\n    onSubmit: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"text\",\n    value: text,\n    className: \"form-control mb-2\",\n    placeholder: \"Search Breweries...\",\n    onChange: onChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"row m-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Search\",\n    className: \"btn btn-primary col-md-6 col-sm-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), breweries.length > 0 && React.createElement(\"input\", {\n    type: \"button\",\n    value: \"ClearAll\",\n    className: \"btn btn-danger col-md-6 col-sm-12\",\n    onClick: clearAll,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }))));\n};\n\nexport default Search;","map":{"version":3,"sources":["C:\\Users\\erosa\\Desktop\\Projects\\React\\brewery-search\\client\\src\\components\\breweries\\Search.js"],"names":["React","useState","useContext","useEffect","Alert","BreweryContext","AlertContext","BreweryURLBuilder","Search","breweryContext","alertContext","text","setText","searchBreweries","getUserLocation","clearBreweries","breweries","loading","navigator","geolocation","getCurrentPosition","pos","lat","coords","latitude","long","longitude","error","console","onChange","e","target","value","onSubmit","preventDefault","setAlert","url","getUrl","then","length","clearAll"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AACA,OAAOC,cAAP,MAA2B,sCAA3B;AACA,OAAOC,YAAP,MAAyB,kCAAzB;AACA,OAAOC,iBAAP,MAA8B,+BAA9B;;AAEA,MAAMC,MAAM,GAAG,MAAM;AACnB,QAAMC,cAAc,GAAGP,UAAU,CAACG,cAAD,CAAjC;AACA,QAAMK,YAAY,GAAGR,UAAU,CAACI,YAAD,CAA/B;;AAFmB,oBAIKL,QAAQ,CAAC,EAAD,CAJb;AAAA;AAAA,QAIZU,IAJY;AAAA,QAINC,OAJM;;AAAA,QAOjBC,eAPiB,GAYfJ,cAZe,CAOjBI,eAPiB;AAAA,QAQjBC,eARiB,GAYfL,cAZe,CAQjBK,eARiB;AAAA,QASjBC,cATiB,GAYfN,cAZe,CASjBM,cATiB;AAAA,QAUjBC,SAViB,GAYfP,cAZe,CAUjBO,SAViB;AAAA,QAWjBC,OAXiB,GAYfR,cAZe,CAWjBQ,OAXiB;AAcnBd,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,iBAAiBe,SAArB,EAAgC;AAC9BA,MAAAA,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CACEC,GAAG,IAAI;AACL,YAAIC,GAAG,GAAGD,GAAG,CAACE,MAAJ,CAAWC,QAArB;AACA,YAAIC,IAAI,GAAGJ,GAAG,CAACE,MAAJ,CAAWG,SAAtB;AACAZ,QAAAA,eAAe,CAACQ,GAAD,EAAMG,IAAN,CAAf;AACD,OALH,EAMEE,KAAK,IAAI;AACPC,QAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACD,OARH;AAUD,KAXD,MAWO;AACLC,MAAAA,OAAO,CAACD,KAAR,CAAc,mBAAd;AACD;AACF,GAfQ,EAeN,EAfM,CAAT;;AAiBA,QAAME,QAAQ,GAAGC,CAAC,IAAIlB,OAAO,CAACkB,CAAC,CAACC,MAAF,CAASC,KAAV,CAA7B;;AAEA,QAAMC,QAAQ,GAAGH,CAAC,IAAI;AACpBA,IAAAA,CAAC,CAACI,cAAF;;AACA,QAAIvB,IAAI,KAAK,EAAb,EAAiB;AACfD,MAAAA,YAAY,CAACyB,QAAb,CAAsB,wBAAtB,EAAgD,SAAhD;AACD,KAFD,MAEO;AACL,YAAMC,GAAG,GAAG,IAAI7B,iBAAJ,GAAwBK,OAAxB,CAAgCD,IAAhC,CAAZ;AACAE,MAAAA,eAAe,CAACuB,GAAG,CAACC,MAAJ,EAAD,CAAf,CAA8BC,IAA9B,CAAmC,MAAM;AACvC,YAAI,CAACrB,OAAD,IAAYD,SAAS,CAACuB,MAAV,KAAqB,CAArC,EAAwC;AACtC7B,UAAAA,YAAY,CAACyB,QAAb,CACE,iGADF,EAEE,SAFF;AAID;AACF,OAPD;AAQAvB,MAAAA,OAAO,CAAC,EAAD,CAAP;AACD;AACF,GAhBD;;AAkBA,QAAM4B,QAAQ,GAAG,MAAM;AACrBzB,IAAAA,cAAc;AACf,GAFD;;AAIA,SACE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAuB,IAAA,QAAQ,EAAEkB,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,KAAK,EAAEtB,IAHT;AAIE,IAAA,SAAS,EAAC,mBAJZ;AAKE,IAAA,WAAW,EAAC,qBALd;AAME,IAAA,QAAQ,EAAEkB,QANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EASE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,KAAK,EAAC,QAFR;AAGE,IAAA,SAAS,EAAC,oCAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAOGb,SAAS,CAACuB,MAAV,GAAmB,CAAnB,IACC;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,KAAK,EAAC,UAFR;AAGE,IAAA,SAAS,EAAC,mCAHZ;AAIE,IAAA,OAAO,EAAEC,QAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARJ,CATF,CAFF,CADF;AA+BD,CAtFD;;AAwFA,eAAehC,MAAf","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport Alert from \"../layout/Alert\";\r\nimport BreweryContext from \"../../context/brewery/breweryContext\";\r\nimport AlertContext from \"../../context/alert/alertContext\";\r\nimport BreweryURLBuilder from \"../../utils/BreweryURLBuilder\";\r\n\r\nconst Search = () => {\r\n  const breweryContext = useContext(BreweryContext);\r\n  const alertContext = useContext(AlertContext);\r\n\r\n  const [text, setText] = useState(\"\");\r\n\r\n  const {\r\n    searchBreweries,\r\n    getUserLocation,\r\n    clearBreweries,\r\n    breweries,\r\n    loading\r\n  } = breweryContext;\r\n\r\n  useEffect(() => {\r\n    if (\"geolocation\" in navigator) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        pos => {\r\n          let lat = pos.coords.latitude;\r\n          let long = pos.coords.longitude;\r\n          getUserLocation(lat, long);\r\n        },\r\n        error => {\r\n          console.error(error);\r\n        }\r\n      );\r\n    } else {\r\n      console.error(\"Blocked by client\");\r\n    }\r\n  }, []);\r\n\r\n  const onChange = e => setText(e.target.value);\r\n\r\n  const onSubmit = e => {\r\n    e.preventDefault();\r\n    if (text === \"\") {\r\n      alertContext.setAlert(\"Please enter something\", \"warning\");\r\n    } else {\r\n      const url = new BreweryURLBuilder().setText(text);\r\n      searchBreweries(url.getUrl()).then(() => {\r\n        if (!loading && breweries.length === 0) {\r\n          alertContext.setAlert(\r\n            \"Sorry, we could not find breweries for what you're looking for. Please try another search term.\",\r\n            \"warning\"\r\n          );\r\n        }\r\n      });\r\n      setText(\"\");\r\n    }\r\n  };\r\n\r\n  const clearAll = () => {\r\n    clearBreweries();\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-1 mb-2\">\r\n      <Alert />\r\n      <form className=\"form\" onSubmit={onSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          name=\"text\"\r\n          value={text}\r\n          className=\"form-control mb-2\"\r\n          placeholder=\"Search Breweries...\"\r\n          onChange={onChange}\r\n        />\r\n        <div className=\"row m-1\">\r\n          <input\r\n            type=\"submit\"\r\n            value=\"Search\"\r\n            className=\"btn btn-primary col-md-6 col-sm-12\"\r\n          />\r\n          {/* <div className=\"divider\"></div> */}\r\n          {breweries.length > 0 && (\r\n            <input\r\n              type=\"button\"\r\n              value=\"ClearAll\"\r\n              className=\"btn btn-danger col-md-6 col-sm-12\"\r\n              onClick={clearAll}\r\n            />\r\n          )}\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n"]},"metadata":{},"sourceType":"module"}